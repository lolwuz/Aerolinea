<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Aerol√≠nea</title>
    <link rel="stylesheet" href="css/styles.css">
</head>

<body>
    <canvas id="gameCanvas"></canvas>
    <script src="javascript/three.js"></script>
    <script src="javascript/controls/OrbitControls.js"></script>
    <script src="javascript/OBJLoader.js"></script>
    <script src="javascript/OBJLoader2.js"></script>
    <script src="javascript/ColladaLoader2.js"></script>
    <script src="objects/Scene.js"></script>
    <script src="objects/World.js"></script>
    <script src="objects/Airport.js"></script>
    <script src="objects/Airplane.js"></script>
    <script>
        var scene;
        var raycaster = new THREE.Raycaster();
        var mouse = new THREE.Vector2();

        init();
        animate();

        function init() {
            scene = new Scene();
            window.addEventListener('resize', onWindowResize, false);
            window.addEventListener( 'click', onMouseClick, false );
        }

        function animate() {

            requestAnimationFrame(animate);
            scene.update();

        }

        function onWindowResize() {

            scene.camera.aspect = window.innerWidth / window.innerHeight;
            scene.camera.updateProjectionMatrix();
            scene.renderer.setSize(window.innerWidth, window.innerHeight);

        }

        function onMouseClick( event ) {
            // calculate mouse position in normalized device coordinates
            // (-1 to +1) for both components
            console.log("Clicked");
            mouse.x = ( event.clientX / window.innerWidth ) * 2 - 1;
            mouse.y = - ( event.clientY / window.innerHeight ) * 2 + 1;

            // update the picking ray with the camera and mouse position
            raycaster.setFromCamera( mouse.clone(), scene.camera );

            // calculate objects intersecting the picking ray
            console.log(scene.children[0].children);
            let intersects = raycaster.intersectObjects( scene.children[0].children );

//            for ( let i = 0; i < intersects.length; i++ ) {
//                if(intersects[i].) {
//                    console.log("Intersect: " + intersects[i].info.name);
//                }
//            }


        }


    </script>
</body>

</html>
